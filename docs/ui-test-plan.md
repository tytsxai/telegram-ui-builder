# UI Test Plan (Workbench)

Scope: desktop workbench layout (left/right panels, center canvas, bottom panel) and share/import/export flows.

## Smoke (happy path)
- [ ] 登录 -> 新建模版 -> 编辑消息/按钮 -> 保存/更新成功且未保存标记消失。
- [ ] 置顶/入口：置顶当前模版，切换入口，跳转入口按钮可用。
- [ ] 分享：生成并复制链接，刷新链接，取消公开；在 `/share/:token` 能加载公开页。
- [ ] 导入/导出：单模版导出 JSON、全流程导出；导入本工具导出的 JSON 能还原数据并链接跳转正确。
- [ ] 关系图：打开关系图，拖拽节点，保存布局后刷新仍保持；检测循环引用提示正常。
- [ ] 模板库：打开“模板库”侧边抽屉，选择卡片后消息/键盘填充正确，引导提示完成；刷新按钮可重新拉取列表。
- [ ] 分享控制：入口已选时生成链接，旋转 token 后新链接可用且旧链接失效，取消公开后分享页不可访问。

## Layout & Responsiveness
- [ ] 左侧面板在窄屏（<1024px）显示是否拥挤；按钮行距/文字不重叠。
- [ ] 底部面板折叠/拖拽：默认高度不压缩画布；在小窗时可折叠且内容不遮挡。
- [ ] 中心画布：手机预览内的按钮文本截断正常，无溢出或重叠；撤销/重做/返回导航按钮位置不挡住主体。
- [ ] 右侧栏：格式化按钮、添加按钮/行按钮在窄屏不换行重叠。

## Error & Edge Cases
- [ ] 未保存切换/离线：未保存提示、离线徽标可见；断网时保存失败提示明确。
- [ ] 导入非法 JSON：显示错误提示，不破坏当前内容。
- [ ] 循环引用：禁止模式下阻止保存并弹窗；允许模式下仅提示。
- [ ] 按钮未配置操作：保存前提示，确认后可继续。
- [ ] 分享前校验：未设置入口或存在指向已删除模版的按钮时，生成分享被阻止并给出明确文案。
- [ ] 模板库失败兜底：模板列表拉取失败时展示错误块，点击刷新可恢复；单个模板加载失败不破坏当前内容。
- [ ] 键盘校验：回调数据 >64B 或 URL 不合法、未选择跳转目标时阻止保存，提示红色错误信息；溢出时按钮角标显示警告。

## Share Page
- [ ] 作者/更新时间显示，私有模版 token 不可访问；复制公开模版到账号成功。
- [ ] “复制并编辑”在已登录状态写入当前账号且跳转首页，未登录时提示登录。

## 关系图 & 布局
- [ ] 打开“查看关系图”，切换布局方向/心智图/仅关联/隐藏孤立/显示按钮标签等开关，节点/边渲染与筛选正确。
- [ ] 保存布局后关闭再打开，节点位置沿用本地/云端记录；点击“重置位置”后回到自动布局并清空已保存坐标。
- [ ] 右键节点可设为入口/删除；拖动节点后自动保存，拖拽连线可创建跳转；布局状态徽标在保存/错误时更新。

## Checklist Notes
- **关系图**: 确认节点徽标/循环提示正常，布局保存/恢复有效。
- **键盘编辑器**: 验证按钮链接屏幕/回调/URL 配置，避免循环或未配置按钮。
